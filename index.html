<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mizuki OS Release v8.0</title>
    <style>
        :root { 
            --main-color: #6c757d; 
            --input-lift: 45px; 
            --accent-green: #4caf50;
            --bg-color: #f8f9fa;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; margin: 0; padding: 0; }
        body, html { height: 100%; overflow: hidden; font-family: -apple-system, "SF Pro Display", "Helvetica Neue", Arial, sans-serif; background: var(--bg-color); }

        /* ä¸»å±å¹• */
        #phone-screen { 
            width: 100%; height: 100%; position: relative; z-index: 1; 
            background: linear-gradient(180deg, #e9ecef 0%, #dee2e6 100%);
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; 
        }
        .status-bar { width: 100%; padding: 8px 20px; display: flex; justify-content: space-between; font-size: 13px; color: #333; font-weight: 500; margin-top: env(safe-area-inset-top); }
        .time-large { font-size: 80px; font-weight: 200; color: #343a40; margin-top: 60px; letter-spacing: -2px; }

        /* åº”ç”¨å›¾æ ‡ */
        .icon-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 40px 25px; width: 100%; }
        .app-icon { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .icon-box { width: 62px; height: 62px; background: #ffffff; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(0,0,0,0.06); transition: transform 0.2s; border: 0.5px solid rgba(0,0,0,0.05); }
        .icon-box.chat { background: #07c160; } /* å¾®ä¿¡å›¾æ ‡è‰² */
        .icon-box.settings { background: #8e8e93; } /* è®¾ç½®å›¾æ ‡è‰² */
        .app-icon:active .icon-box { transform: scale(0.92); }
        .app-icon span { font-size: 12px; color: #495057; margin-top: 8px; font-weight: 500; }

        /* ç»Ÿä¸€é¡µé¢æ¡†æ¶ */
        .full-page { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #f2f2f7; z-index: 1000; flex-direction: column; animation: slideIn 0.3s ease; }
        .sub-page { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #f2f2f7; z-index: 2000; flex-direction: column; }
        
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .header { padding: 50px 16px 12px; background: #ffffff; display: flex; align-items: center; border-bottom: 0.5px solid #d1d1d6; }
        .header .btn-back { color: #007aff; font-size: 17px; cursor: pointer; min-width: 60px; }
        .header h1 { flex: 1; text-align: center; font-size: 17px; font-weight: 600; color: #000; }
        .header .btn-placeholder { min-width: 60px; }

        /* åˆ—è¡¨ä¸å¡ç‰‡ */
        .list-group { margin: 20px 16px; background: #ffffff; border-radius: 12px; overflow: hidden; }
        .list-item { padding: 14px 16px; display: flex; justify-content: space-between; align-items: center; border-bottom: 0.5px solid #f2f2f7; cursor: pointer; }
        .list-item:last-child { border-bottom: none; }
        .list-item:active { background: #f2f2f7; }
        .list-item label { font-size: 16px; color: #000; }
        .chevron { color: #c7c7cc; font-size: 18px; }

        /* é…ç½®è¯¦æƒ… */
        .config-section { padding: 20px 16px; }
        .config-card { background: #fff; border-radius: 12px; padding: 16px; margin-bottom: 20px; }
        .field { margin-bottom: 20px; }
        .field:last-child { margin-bottom: 0; }
        .field-label { display: block; font-size: 13px; color: #8e8e93; margin-bottom: 8px; font-weight: 400; }
        .field input[type="text"], .field input[type="password"], .field select { width: 100%; padding: 12px; border: none; background: #f2f2f7; border-radius: 8px; font-size: 15px; }
        
        /* æŒ‰é’®ç³»ç»Ÿ */
        .btn-primary { width: 100%; padding: 16px; background: #007aff; color: #fff; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; margin-top: 10px; }
        .btn-secondary { width: 100%; padding: 12px; background: transparent; color: #ff3b30; border: none; font-size: 14px; margin-top: 10px; }

        /* æ°”æ³¡ä¸é¢„è§ˆ */
        .preview-area { background: #e5e5ea; padding: 20px; border-radius: 12px; margin-top: 10px; }
        .msg-bubble { padding: 10px 14px; background: #34c759; color: #fff; font-size: 14px; align-self: flex-end; max-width: 80%; }

        /* é€šä¿¡ç•Œé¢ */
        .chat-scroll { flex: 1; overflow-y: auto; padding: 16px; display: flex; flex-direction: column; background: #f2f2f7; }
        .input-bar { background: #fff; display: flex; align-items: center; padding: 10px 16px; border-top: 0.5px solid #d1d1d6; padding-bottom: calc(var(--input-lift) + env(safe-area-inset-bottom)); }
        .input-bar input { flex: 1; background: #f2f2f7; border: none; border-radius: 20px; padding: 10px 16px; font-size: 16px; }
        .btn-send { margin-left: 12px; color: #007aff; font-weight: 600; border: none; background: none; font-size: 16px; }

        /* æç¤ºæ¡† */
        #toast { display: none; position: fixed; bottom: 150px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: #fff; padding: 10px 20px; border-radius: 20px; font-size: 14px; z-index: 10000; }
    </style>
</head>
<body>

<div id="phone-screen">
    <div class="status-bar"><span id="mini-time">00:00</span><span>5G 100%</span></div>
    <div class="time-large" id="clock">00:00</div>
    <div class="icon-grid">
        <div class="app-icon" onclick="openPage('chat')"><div class="icon-box chat">ğŸ’¬</div><span>Messages</span></div>
        <div class="app-icon" onclick="openPage('settings')"><div class="icon-box settings">âš™ï¸</div><span>Settings</span></div>
    </div>
</div>

<div id="settings-page" class="full-page">
    <div class="header">
        <span class="btn-back" onclick="closePage('settings')">å…³é—­</span>
        <h1>ç³»ç»Ÿè®¾ç½®</h1>
        <span class="btn-placeholder"></span>
    </div>
    <div class="list-group">
        <div class="list-item" onclick="openSub('api-config')">
            <label>API åŸºç¡€é…ç½®</label><span class="chevron">></span>
        </div>
        <div class="list-item" onclick="openSub('ui-config')">
            <label>ä¸ªæ€§åŒ–ç¾åŒ–</label><span class="chevron">></span>
        </div>
    </div>
    
    <div id="api-config" class="sub-page">
        <div class="header">
            <span class="btn-back" onclick="closeSub('api-config')">è¿”å›</span>
            <h1>API æ¥å£</h1>
            <span class="btn-placeholder"></span>
        </div>
        <div class="config-section">
            <div class="config-card">
                <div class="field">
                    <label class="field-label">æ¥å£å¯†é’¥ (API KEY)</label>
                    <input type="password" id="api-key" placeholder="è¾“å…¥å¯†é’¥">
                </div>
                <div class="field">
                    <label class="field-label">æœåŠ¡æ¨¡å‹</label>
                    <select>
                        <option>gemini-1.5-pro</option>
                        <option>gemini-1.5-flash</option>
                    </select>
                </div>
                <button class="btn-primary" onclick="saveAPI()">åº”ç”¨é…ç½®</button>
            </div>
        </div>
    </div>

    <div id="ui-config" class="sub-page">
        <div class="header">
            <span class="btn-back" onclick="closeSub('ui-config')">è¿”å›</span>
            <h1>è§†è§‰ä¸ç¾åŒ–</h1>
            <span class="btn-placeholder"></span>
        </div>
        <div class="config-section">
            <div class="config-card">
                <div class="field">
                    <label class="field-label">æ›´æ¢å£çº¸</label>
                    <input type="file" accept="image/*" onchange="loadWallpaper(event)" style="font-size: 12px;">
                </div>
                <div class="field">
                    <label class="field-label">æ¶ˆæ¯æ°”æ³¡åœ†è§’</label>
                    <input type="range" min="0" max="25" id="radius-range" oninput="previewRadius(this.value)">
                    <div class="preview-area" style="display: flex; flex-direction: column;">
                        <div id="demo-bubble" class="msg-bubble">ç³»ç»Ÿæ¶ˆæ¯é¢„è§ˆæ•ˆæœ</div>
                    </div>
                </div>
                <div class="field">
                    <label class="field-label">åº•éƒ¨é¿ç©ºé«˜åº¦ (åƒç´ )</label>
                    <input type="range" min="10" max="120" id="lift-range">
                </div>
                <button class="btn-primary" onclick="saveUI()">ä¿å­˜å¹¶åº”ç”¨è®¾ç½®</button>
                <button class="btn-secondary" onclick="resetUI()">é‡ç½®æ‰€æœ‰å¤–è§‚</button>
            </div>
        </div>
    </div>
</div>

<div id="chat-page" class="full-page">
    <div class="header">
        <span class="btn-back" onclick="closePage('chat')">è¿”å›</span>
        <h1>æ²Ÿé€šè®°å½•</h1>
        <span class="btn-placeholder"></span>
    </div>
    <div id="chat-content" class="chat-scroll"></div>
    <div class="input-bar">
        <input type="text" id="chat-input" placeholder="è¾“å…¥å†…å®¹...">
        <button class="btn-send" onclick="sendMessage()">å‘é€</button>
    </div>
</div>

<div id="toast">å·²æˆåŠŸä¿å­˜è®¾ç½®</div>

<script>
    // æ—¶é—´é€»è¾‘
    function updateClock() {
        const d = new Date();
        const t = d.getHours().toString().padStart(2,'0')+':'+d.getMinutes().toString().padStart(2,'0');
        document.getElementById('clock').innerText = t;
        document.getElementById('mini-time').innerText = t;
    }
    setInterval(updateClock, 1000); updateClock();

    // å¯¼èˆªé€»è¾‘
    function openPage(id) { document.getElementById(id + '-page').style.display = 'flex'; }
    function closePage(id) { document.getElementById(id + '-page').style.display = 'none'; }
    function openSub(id) { document.getElementById(id).style.display = 'flex'; }
    function closeSub(id) { document.getElementById(id).style.display = 'none'; }

    // æç¤ºé€»è¾‘
    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.style.display = 'block';
        setTimeout(() => t.style.display = 'none', 2000);
    }

    // ç¾åŒ–é€»è¾‘
    function loadWallpaper(event) {
        const file = event.target.files[0];
        if(!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            document.getElementById('phone-screen').style.backgroundImage = `url(${e.target.result})`;
            localStorage.setItem('m_bg', e.target.result);
        };
        reader.readAsDataURL(file);
    }

    function previewRadius(v) {
        document.getElementById('demo-bubble').style.borderRadius = v + 'px';
    }

    function saveUI() {
        const radius = document.getElementById('radius-range').value;
        const lift = document.getElementById('lift-range').value;
        localStorage.setItem('m_radius', radius);
        localStorage.setItem('m_lift', lift);
        document.documentElement.style.setProperty('--input-lift', lift + 'px');
        showToast('ç¾åŒ–é…ç½®å·²ç”Ÿæ•ˆ');
    }

    function saveAPI() {
        localStorage.setItem('m_apikey', document.getElementById('api-key').value);
        showToast('APIé…ç½®å·²åº”ç”¨');
    }

    function resetUI() {
        if(confirm('ç¡®å®šè¦æ¢å¤å‡ºå‚å¤–è§‚è®¾ç½®å—ï¼Ÿ')) {
            localStorage.clear();
            location.reload();
        }
    }

    function sendMessage() {
        const i = document.getElementById('chat-input');
        if(!i.value) return;
        const d = document.createElement('div');
        const r = localStorage.getItem('m_radius') || '15';
        d.className = 'msg-bubble';
        d.style.borderRadius = r + 'px';
        d.style.marginBottom = '12px';
        d.innerText = i.value;
        document.getElementById('chat-content').appendChild(d);
        i.value = '';
        document.getElementById('chat-content').scrollTop = document.getElementById('chat-content').scrollHeight;
    }

    window.onload = () => {
        const bg = localStorage.getItem('m_bg');
        if(bg) document.getElementById('phone-screen').style.backgroundImage = `url(${bg})`;
        
        const radius = localStorage.getItem('m_radius') || '15';
        const lift = localStorage.getItem('m_lift') || '45';
        document.getElementById('radius-range').value = radius;
        document.getElementById('lift-range').value = lift;
        previewRadius(radius);
        document.documentElement.style.setProperty('--input-lift', lift + 'px');
    };
</script>
</body>
</html>
