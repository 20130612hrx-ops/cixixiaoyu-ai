<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mizuki OS Professional Edition</title>
    <style>
        :root { 
            --primary-accent: #8E9E8E;
            --input-lift: 48px; 
            /* é¢„è®¾èƒŒæ™¯é€»è¾‘ */
            --default-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; margin: 0; padding: 0; }
        body, html { height: 100%; overflow: hidden; font-family: -apple-system, sans-serif; background: #000; }

        /* ä¸»å±å¹• */
        #phone-screen { 
            width: 100%; height: 100%; position: relative; 
            background: var(--default-gradient);
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; 
            transition: background-image 0.6s ease-in-out;
        }

        /* çŠ¶æ€æ  & æ—¶é—´ (é’ˆå¯¹æµ…è‰²å›¾åŠ æ·±äº†é¢œè‰²) */
        .status-bar { width: 100%; padding: 12px 24px; display: flex; justify-content: space-between; font-size: 13px; color: #333; font-weight: 700; margin-top: env(safe-area-inset-top); }
        .time-display { font-size: 80px; font-weight: 200; color: #333; margin-top: 50px; letter-spacing: -2px; }

        /* æ¡Œé¢å›¾æ ‡ */
        .app-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 40px 24px; width: 100%; }
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .app-icon { width: 62px; height: 62px; border-radius: 16px; background: rgba(255,255,255,0.9); box-shadow: 0 4px 15px rgba(0,0,0,0.06); display: flex; align-items: center; justify-content: center; font-size: 26px; border: 1px solid #fff; }
        .app-item span { font-size: 12px; color: #444; margin-top: 8px; font-weight: 600; text-shadow: 0 1px 2px rgba(255,255,255,0.8); }

        /* ç»Ÿä¸€è§†å›¾å±‚ */
        .view-layer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #F2F2F7; z-index: 1000; flex-direction: column; }
        .nav-header { padding: 50px 16px 12px; background: #FFF; border-bottom: 0.5px solid #DDD; display: flex; align-items: center; justify-content: space-between; }
        .nav-btn { color: #007AFF; font-size: 17px; cursor: pointer; }
        .nav-title { font-size: 17px; font-weight: 600; }

        /* è®¾ç½®å¡ç‰‡ */
        .menu-list { margin: 20px 16px; background: #FFF; border-radius: 12px; overflow: hidden; }
        .menu-item { padding: 16px; display: flex; justify-content: space-between; align-items: center; border-bottom: 0.5px solid #F2F2F7; cursor: pointer; }
        .menu-item:active { background: #F9F9F9; }

        /* ä¿å­˜æŒ‰é’®æ ·å¼ */
        .btn-action { width: calc(100% - 32px); margin: 20px 16px; padding: 16px; background: var(--primary-accent); color: #FFF; border: none; border-radius: 12px; font-weight: 600; font-size: 16px; }

        /* èŠå¤©æ°”æ³¡ */
        .chat-container { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; background: #EDEDED; }
        .input-wrap { background: #FFF; padding: 10px 16px calc(var(--input-lift) + env(safe-area-inset-bottom)); display: flex; border-top: 0.5px solid #CCC; }
        .input-box { flex: 1; background: #F2F2F7; border: none; border-radius: 20px; padding: 10px 16px; font-size: 16px; }

        #toast-box { display: none; position: fixed; bottom: 20%; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: #FFF; padding: 10px 20px; border-radius: 20px; z-index: 9999; }
    </style>
</head>
<body>

<div id="phone-screen">
    <div class="status-bar"><span>00:00</span><span>ğŸ“¶ 100%</span></div>
    <div class="time-display" id="clock">00:00</div>
    <div class="app-grid">
        <div class="app-item" onclick="toggleV('v-msg', true)"><div class="app-icon">ğŸ’¬</div><span>æ²Ÿé€š</span></div>
        <div class="app-item" onclick="toggleV('v-set', true)"><div class="app-icon">âš™ï¸</div><span>è®¾ç½®</span></div>
    </div>
</div>

<div id="v-set" class="view-layer">
    <div class="nav-header"><span class="nav-btn" onclick="toggleV('v-set', false)">é€€å‡º</span><span class="nav-title">è®¾ç½®</span><span></span></div>
    <div class="menu-list">
        <div class="menu-item" onclick="toggleV('s-ui', true)"><span>ä¸ªæ€§åŒ–ç¾åŒ–</span><span>></span></div>
        <div class="menu-item" onclick="toggleV('s-api', true)"><span>API å¯†é’¥é…ç½®</span><span>></span></div>
    </div>

    <div id="s-ui" class="view-layer" style="z-index:1100">
        <div class="nav-header"><span class="nav-btn" onclick="toggleV('s-ui', false)">è¿”å›</span><span class="nav-title">è§†è§‰ç¾åŒ–</span><span></span></div>
        <div style="padding:16px">
            <label style="font-size:13px; color:#8e8e93">æ›´æ¢å£çº¸</label>
            <input type="file" accept="image/*" onchange="userWallpaper(event)" style="display:block; margin:15px 0">
            <label style="font-size:13px; color:#8e8e93">åº•éƒ¨é¿è®©é«˜åº¦</label>
            <input type="range" min="10" max="150" id="lift-range" style="width:100%; margin:15px 0">
            <button class="btn-action" onclick="saveUI()">åº”ç”¨å¹¶ä¿å­˜è®¾ç½®</button>
            <button class="btn-action" style="background:#CCC; margin-top:0" onclick="resetSystem()">æ¢å¤åˆå§‹å£çº¸</button>
        </div>
    </div>
</div>

<div id="v-msg" class="view-layer">
    <div class="nav-header"><span class="nav-btn" onclick="toggleV('v-msg', false)">è¿”å›</span><span class="nav-title">æ²Ÿé€š</span><span></span></div>
    <div id="chat-list" class="chat-container"></div>
    <div class="input-wrap"><input type="text" id="m-in" class="input-box" placeholder="è¾“å…¥å†…å®¹..."><button onclick="send()" style="margin-left:10px; color:#007AFF; font-weight:600; border:none; background:none">å‘é€</button></div>
</div>

<div id="toast-box">è®¾ç½®å·²åº”ç”¨</div>

<script>
    // ã€å…³é”®ã€‘å¤§ä½¬ï¼Œè¿™é‡Œæ˜¯ä½ è¦çš„åˆå§‹èƒŒæ™¯å›¾é“¾æ¥ï¼Œå¦‚æœè¿˜æ˜¯ç™½å±ï¼Œæˆ‘ä¼šæ•™ä½ ç”¨ Base64
    const DEFAULT_WALLPAPER = "https://r.jina.ai/i/429486c761c54e09be04407887376092";

    function updateTime() {
        const d = new Date();
        const t = d.getHours().toString().padStart(2,'0')+':'+d.getMinutes().toString().padStart(2,'0');
        document.getElementById('clock').innerText = t;
    }
    setInterval(updateTime, 1000); updateTime();

    function toggleV(id, show) { document.getElementById(id).style.display = show ? 'flex' : 'none'; }

    function userWallpaper(e) {
        const f = e.target.files[0];
        const r = new FileReader();
        r.onload = (ev) => {
            document.getElementById('phone-screen').style.backgroundImage = `url(${ev.target.result})`;
            localStorage.setItem('m_custom_bg', ev.target.result);
        };
        r.readAsDataURL(f);
    }

    function saveUI() {
        const h = document.getElementById('lift-range').value;
        localStorage.setItem('m_lift', h);
        document.documentElement.style.setProperty('--input-lift', h + 'px');
        const box = document.getElementById('toast-box');
        box.style.display = 'block'; setTimeout(()=>box.style.display='none', 2000);
    }

    function resetSystem() {
        localStorage.removeItem('m_custom_bg');
        document.getElementById('phone-screen').style.backgroundImage = `url(${DEFAULT_WALLPAPER})`;
    }

    function send() {
        const i = document.getElementById('m-in'); if(!i.value) return;
        const d = document.createElement('div');
        d.style = "align-self:flex-end; background:#95EC69; padding:10px 15px; border-radius:15px; margin-bottom:10px; max-width:80%; font-size:15px";
        d.innerText = i.value;
        document.getElementById('chat-list').appendChild(d);
        i.value = '';
    }

    window.onload = () => {
        // é€»è¾‘ï¼šä¼˜å…ˆè¯»ç”¨æˆ·è‡ªå®šä¹‰ï¼Œæ²¡æœ‰å°±è¯» DEFAULT_WALLPAPER
        const custom = localStorage.getItem('m_custom_bg');
        document.getElementById('phone-screen').style.backgroundImage = `url(${custom || DEFAULT_WALLPAPER})`;
        const lift = localStorage.getItem('m_lift') || '48';
        document.getElementById('lift-range').value = lift;
        document.documentElement.style.setProperty('--input-lift', lift + 'px');
    };
</script>
</body>
</html>
