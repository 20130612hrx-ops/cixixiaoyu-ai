<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mizuki OS Professional Edition</title>
    <style>
        :root { 
            --primary-accent: #8E9E8E; /* é…åˆèƒŒæ™¯çš„æŸ”å’Œç°ç»¿ */
            --input-lift: 48px; 
            --glass-bg: rgba(255, 255, 255, 0.7);
            /* å·²ç»ä¸ºä½ å†…ç½®äº†åˆå§‹èƒŒæ™¯å›¾é€»è¾‘ */
            --system-bg: url('https://r.jina.ai/i/429486c761c54e09be04407887376092'); 
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; margin: 0; padding: 0; }
        body, html { height: 100%; overflow: hidden; font-family: -apple-system, "SF Pro", sans-serif; background: #FFF; }

        /* ä¸»å±å¹•ï¼šä½¿ç”¨å¤§ä½¬æä¾›çš„ç¥ä»™èƒŒæ™¯ */
        #phone-screen { 
            width: 100%; height: 100%; position: relative; z-index: 1; 
            background-image: var(--system-bg);
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; 
            transition: background-image 0.5s ease;
        }

        /* çŠ¶æ€æ ï¼šä¸ºäº†åœ¨æµ…è‰²èƒŒæ™¯ä¸‹çœ‹æ¸…ï¼Œè°ƒæ·±äº†é¢œè‰² */
        .status-bar { width: 100%; padding: 10px 24px; display: flex; justify-content: space-between; font-size: 13px; color: #444; font-weight: 600; margin-top: env(safe-area-inset-top); }
        .time-display { font-size: 84px; font-weight: 200; color: #444; margin-top: 50px; letter-spacing: -3px; opacity: 0.9; }

        /* åº”ç”¨å›¾æ ‡ï¼šå¾®è°ƒé˜´å½±æ›´ç¬¦åˆæ°›å›´ */
        .app-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; padding: 40px 24px; width: 100%; }
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .app-icon { width: 62px; height: 62px; border-radius: 16px; background: #FFF; box-shadow: 0 8px 24px rgba(0,0,0,0.05); display: flex; align-items: center; justify-content: center; font-size: 28px; border: 1px solid rgba(255,255,255,0.8); }
        .app-item span { font-size: 12px; color: #555; margin-top: 8px; font-weight: 500; }

        /* å…¨å±å®¹å™¨ */
        .view-container { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #F9F9F9; z-index: 1000; flex-direction: column; }
        .view-sub { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #F9F9F9; z-index: 2000; flex-direction: column; }

        /* å¯¼èˆªæ  */
        .nav-bar { padding: 50px 18px 12px; background: #FFF; border-bottom: 0.5px solid #E5E5E5; display: flex; align-items: center; justify-content: space-between; }
        .nav-action { color: #007AFF; font-size: 17px; cursor: pointer; min-width: 60px; }
        .nav-title { font-size: 17px; font-weight: 600; color: #000; }

        /* è®¾ç½®å¡ç‰‡æ¨¡å— */
        .card-container { margin: 15px; background: #FFF; border-radius: 14px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }
        .card-row { padding: 16px; display: flex; justify-content: space-between; align-items: center; border-bottom: 0.5px solid #F0F0F0; cursor: pointer; }
        .card-row:last-child { border-bottom: none; }
        .card-row:active { background: #F5F5F5; }
        .card-row label { font-size: 16px; color: #333; }
        .chevron { color: #C7C7CC; font-weight: bold; }

        /* è¡¨å•æ§ä»¶ */
        .form-box { padding: 0 15px; }
        .input-group { background: #FFF; border-radius: 12px; padding: 18px; margin-top: 15px; }
        .input-group label { display: block; font-size: 12px; color: #999; margin-bottom: 10px; font-weight: bold; text-transform: uppercase; }
        .input-control { width: 100%; padding: 12px; border: none; background: #F2F2F7; border-radius: 10px; font-size: 15px; }

        /* ä¿å­˜æŒ‰é’® */
        .save-btn { width: 100%; padding: 16px; background: #8E9E8E; color: #FFF; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; margin-top: 20px; box-shadow: 0 4px 12px rgba(142,158,142,0.3); }

        /* èŠå¤©ç³»ç»Ÿ */
        .chat-view { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; background: #F2F2F2; }
        .chat-bar { background: #FFF; border-top: 0.5px solid #D1D1D6; padding: 10px 16px calc(var(--input-lift) + env(safe-area-inset-bottom)); display: flex; align-items: center; }
        .chat-input { flex: 1; background: #F2F2F7; border-radius: 20px; padding: 10px 16px; border: none; font-size: 16px; }
        .send-action { margin-left: 12px; color: #007AFF; font-weight: 600; font-size: 16px; border: none; background: none; }

        #toast { display: none; position: fixed; bottom: 18%; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.75); color: #FFF; padding: 10px 20px; border-radius: 22px; z-index: 9999; font-size: 14px; }
    </style>
</head>
<body>

<div id="phone-screen">
    <div class="status-bar"><span id="mini-time">00:00</span><span>5G 100%</span></div>
    <div class="time-display" id="clock">00:00</div>
    <div class="app-grid">
        <div class="app-item" onclick="showView('v-chat')"><div class="app-icon" style="background:#FFF">ğŸ’¬</div><span>æ²Ÿé€š</span></div>
        <div class="app-item" onclick="showView('v-settings')"><div class="app-icon" style="background:#FFF">âš™ï¸</div><span>è®¾ç½®</span></div>
    </div>
</div>

<div id="v-settings" class="view-container">
    <div class="nav-bar"><span class="nav-action" onclick="hideView('v-settings')">é€€å‡º</span><span class="nav-title">ç³»ç»Ÿé…ç½®</span><span class="nav-action" style="visibility:hidden"></span></div>
    <div class="card-container">
        <div class="card-row" onclick="showSub('s-api')"><label>API åŸºç¡€é…ç½®</label><span class="chevron">></span></div>
        <div class="card-row" onclick="showSub('s-ui')"><label>ä¸ªæ€§åŒ–ç¾åŒ–</label><span class="chevron">></span></div>
    </div>

    <div id="s-api" class="view-sub">
        <div class="nav-bar"><span class="nav-action" onclick="hideSub('s-api')">è¿”å›</span><span class="nav-title">API é…ç½®</span><span class="nav-action" style="visibility:hidden"></span></div>
        <div class="form-box">
            <div class="input-group">
                <label>Gemini API Key</label>
                <input type="password" id="api-key-val" class="input-control" placeholder="åœ¨æ­¤è¾“å…¥å¯†é’¥...">
            </div>
            <button class="save-btn" onclick="saveData('api')">åº”ç”¨å¹¶ä¿å­˜</button>
        </div>
    </div>

    <div id="s-ui" class="view-sub">
        <div class="nav-bar"><span class="nav-action" onclick="hideSub('s-ui')">è¿”å›</span><span class="nav-title">ç¾åŒ–è®¾ç½®</span><span class="nav-action" style="visibility:hidden"></span></div>
        <div class="form-box">
            <div class="input-group">
                <label>ä»ç›¸å†Œé€‰å–å£çº¸</label>
                <input type="file" accept="image/*" onchange="changeWallpaper(event)" class="input-control">
            </div>
            <div class="input-group">
                <label>è¾“å…¥æ é¿è®©é«˜åº¦ (PX)</label>
                <input type="range" min="10" max="150" id="height-range" style="width:100%">
            </div>
            <button class="save-btn" onclick="saveData('ui')">ä¿å­˜å½“å‰ç¾åŒ–</button>
        </div>
    </div>
</div>

<div id="v-chat" class="view-container">
    <div class="nav-bar"><span class="nav-action" onclick="hideView('v-chat')">è¿”å›</span><span class="nav-title">å¯¹è¯äº¤äº’</span><span class="nav-action" style="visibility:hidden"></span></div>
    <div id="msg-container" class="chat-view"></div>
    <div class="chat-bar">
        <input type="text" id="msg-input-field" class="chat-input" placeholder="è¾“å…¥æ¶ˆæ¯å†…å®¹...">
        <button class="send-action" onclick="handleSend()">å‘é€</button>
    </div>
</div>

<div id="toast">è®¾ç½®å·²æˆåŠŸåº”ç”¨</div>

<script>
    function updateClock() {
        const now = new Date();
        const t = now.getHours().toString().padStart(2,'0')+':'+now.getMinutes().toString().padStart(2,'0');
        document.getElementById('clock').innerText = t;
        document.getElementById('mini-time').innerText = t;
    }
    setInterval(updateClock, 1000); updateClock();

    function showView(id) { document.getElementById(id).style.display = 'flex'; }
    function hideView(id) { document.getElementById(id).style.display = 'none'; }
    function showSub(id) { document.getElementById(id).style.display = 'flex'; }
    function hideSub(id) { document.getElementById(id).style.display = 'none'; }

    function changeWallpaper(e) {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = (ev) => {
            document.getElementById('phone-screen').style.backgroundImage = `url(${ev.target.result})`;
            localStorage.setItem('m_bg_data', ev.target.result);
        };
        reader.readAsDataURL(file);
    }

    function saveData(type) {
        if(type === 'ui') {
            const h = document.getElementById('height-range').value;
            localStorage.setItem('m_lift_val', h);
            document.documentElement.style.setProperty('--input-lift', h + 'px');
        } else {
            localStorage.setItem('m_key_val', document.getElementById('api-key-val').value);
        }
        const toast = document.getElementById('toast');
        toast.style.display = 'block';
        setTimeout(() => toast.style.display = 'none', 2000);
    }

    function handleSend() {
        const input = document.getElementById('msg-input-field');
        if(!input.value) return;
        const div = document.createElement('div');
        div.style = "align-self:flex-end; background:#95EC69; padding:10px 16px; border-radius:15px; margin-bottom:12px; max-width:80%; font-size:15px; box-shadow:0 1px 3px rgba(0,0,0,0.1);";
        div.innerText = input.value;
        document.getElementById('msg-container').appendChild(div);
        input.value = '';
        document.getElementById('msg-container').scrollTop = document.getElementById('msg-container').scrollHeight;
    }

    window.onload = () => {
        const savedBg = localStorage.getItem('m_bg_data');
        if(savedBg) document.getElementById('phone-screen').style.backgroundImage = `url(${savedBg})`;
        const savedLift = localStorage.getItem('m_lift_val') || '48';
        document.getElementById('height-range').value = savedLift;
        document.documentElement.style.setProperty('--input-lift', savedLift + 'px');
    };
</script>
</body>
</html>
